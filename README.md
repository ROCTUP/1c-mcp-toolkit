# 1C MCP Toolkit

**ะกะธััะตะผะฐ ะธะฝัะตะณัะฐัะธะธ AI-ะฐะณะตะฝัะพะฒ ั ะฑะฐะทะฐะผะธ ะดะฐะฝะฝัั 1ะก:ะัะตะดะฟัะธััะธะต ัะตัะตะท MCP ะธ REST API**

## ๐ ะะฟะธัะฐะฝะธะต

1C MCP Toolkit โ ััะพ ัะตัะตะฝะธะต ะดะปั ะฟะพะดะบะปััะตะฝะธั AI-ะฐะณะตะฝัะพะฒ (Kiro, Claude ะธ ะดั.) ะบ ะฑะฐะทะฐะผ ะดะฐะฝะฝัั 1ะก:ะัะตะดะฟัะธััะธะต. ะะพะดะดะตัะถะธะฒะฐะตั ะดะฒะฐ ะฒะฐัะธะฐะฝัะฐ ัะฐะฑะพัั: **ะฒัััะพะตะฝะฝัะน ัะตัะฒะตั** (HTTP-ัะตัะฒะตั ะทะฐะฟััะบะฐะตััั ะฟััะผะพ ะฒะฝัััะธ ะพะฑัะฐะฑะพัะบะธ 1ะก, ะฑะตะท Python) ะธ **ะฟัะพะบัะธ** (Python-ัะตัะฒะตั ั long polling).

**ะะปััะตะฒัะต ะฟัะตะธะผััะตััะฒะฐ:**
- โ ะะต ััะตะฑัะตััั ะธะทะผะตะฝะตะฝะธะต ะบะพะฝัะธะณััะฐัะธะธ 1C
- โ ะะต ะฝัะถะฝะฐ ะฟัะฑะปะธะบะฐัะธั 1C ัะตัะฒะตัะฐ
- โ ะะต ะธัะฟะพะปัะทัะตั COM-ัะพะตะดะธะฝะตะฝะธะต
- โ ะกะพะฒะผะตััะธะผะพััั ั 1ะก:ะัะตะดะฟัะธััะธะต 8.2.13+ / 8.3.25
- โ **ะัััะพะตะฝะฝัะน ัะตัะฒะตั**: Python ะฝะต ะฝัะถะตะฝ โ HTTP-ัะตัะฒะตั ะทะฐะฟััะบะฐะตััั ะฟััะผะพ ะฒ 1ะก
- โ ะะพะดะดะตัะถะบะฐ Docker (ัะตะถะธะผ ะัะพะบัะธ)

## ๐๏ธ ะััะธัะตะบัััะฐ

### ะะฐัะธะฐะฝั 1: ะัััะพะตะฝะฝัะน ัะตัะฒะตั

HTTP-ัะตัะฒะตั ะทะฐะฟััะบะฐะตััั ะฟััะผะพ ะฒะฝัััะธ ะพะฑัะฐะฑะพัะบะธ 1ะก. Python ะฝะต ะฝัะถะตะฝ.

```
โโโโโโโโโโโโโโโโโโโ   MCP / REST API   โโโโโโโโโโโโโโโโโโโ
โ    AI ะะณะตะฝั     โ โโโโโโโโโโโโโโโโโบ โ 1ะก (.epf)       โ
โ  (Kiro, Claude) โ   /mcp /api/*     โ ะััั. HTTP-ัะตัะฒะตัโ
โโโโโโโโโโโโโโโโโโโ                   โโโโโโโโโโโโโโโโโโ
                                          โ
                                          โผ
                                  โโโโโโโโโโโโโโโโโ
                                  โ ะะฐะทะฐ ะดะฐะฝะฝัั 1ะกโ
                                  โโโโโโโโโโโโโโโโโ
```

### ะะฐัะธะฐะฝั 2: ะัะพะบัะธ-ัะตะถะธะผ

```
โโโโโโโโโโโโโโโโโโโ   MCP / REST API            โโโโโโโโโโโโโโโโโโโ
โ    AI ะะณะตะฝั     โ โโโโโโโโโโโโโโโโโโโโโโโโโโโบ โ                 โ
โ  (Kiro, Claude) โ         /mcp    /api/*      โ   Python Proxy  โ
โโโโโโโโโโโโโโโโโโโ                             โ     Server      โ
                                                โ                 โ
โโโโโโโโโโโโโโโโโโโ     HTTP Long Polling       โ   (FastAPI +    โ
โ  1ะก ะะฑัะฐะฑะพัะบะฐ   โ โโโโโโโโโโโโโโโโโโโโโโโโโโโบ โ    MCP SDK)     โ
โ  (ะฒะฝะตัะฝัั .epf) โ    /1c/poll, /1c/result     โ                 โ
โโโโโโโโโโโโโโโโโโโ                             โโโโโโโโโโโโโโโโโโโ
        โ                                               โ
        โผ                                               โ
โโโโโโโโโโโโโโโโโโโ                             โโโโโโโโโดโโโโโโโโ
โ   ะะฐะทะฐ ะดะฐะฝะฝัั 1ะก โ                             โ    Docker     โ
โ (8.2.13/8.3.25) โ                             โ   Container   โ
โโโโโโโโโโโโโโโโโโโ                             โโโโโโโโโโโโโโโโโ
```

## ๐ ะัััััะน ััะฐัั

### ะะฐัะธะฐะฝั 0: ะัััะพะตะฝะฝัะน ัะตัะฒะตั (ะฑะตะท Python, ัะตะบะพะผะตะฝะดัะตััั)

1. ะัะบัะพะนัะต `build/MCP_Toolkit.epf` ะฒ 1ะก:ะัะตะดะฟัะธััะธะต
2. ะ ัะพัะผะต ะฒัะฑะตัะธัะต ัะตะถะธะผ **ยซะัััะพะตะฝะฝัะน ัะตัะฒะตัยป**
3. ะะฐะถะผะธัะต ยซะะฐะฟัััะธัั ัะตัะฒะตัยป
4. ะะฐัััะพะนัะต AI-ะฐะณะตะฝั ะฝะฐ `http://<ip-ะบะพะผะฟัััะตัะฐ-1ะก>:6003/mcp`

### ะะฐัะธะฐะฝั 1: Docker Hub (ัะตะถะธะผ ะัะพะบัะธ)

ะะฐะฟััะบ ะฟัะพะบัะธ-ัะตัะฒะตัะฐ ะธะท ะณะพัะพะฒะพะณะพ ะพะฑัะฐะทะฐ ะฝะฐ Docker Hub:

```bash
docker run -d -p 6003:6003 -e ALLOW_DANGEROUS_WITH_APPROVAL=true --restart unless-stopped --name 1c-mcp-toolkit-proxy roctup/1c-mcp-toolkit-proxy
```

### ะะฐัะธะฐะฝั 2: Docker Compose

```bash
# ะะปะพะฝะธัะพะฒะฐัั ัะตะฟะพะทะธัะพัะธะน
git clone <repository-url>
cd 1c-mcp-toolkit

# ะะฐะฟัััะธัั ัะตัะตะท Docker Compose
docker-compose up -d
```

### ะะฐัะธะฐะฝั 3: ะััะผะพะน ะทะฐะฟััะบ Python

```bash
# ะกะพะทะดะฐัั ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต
python -m venv .venv
.venv\Scripts\activate     # Windows
# ะธะปะธ
source .venv/bin/activate  # Linux/Mac

# ะฃััะฐะฝะพะฒะธัั ะทะฐะฒะธัะธะผะพััะธ
pip install -r requirements.txt

# ะะฐะฟัััะธัั ัะตัะฒะตั
python -m onec_mcp_toolkit_proxy
```

ะกะตัะฒะตั ะทะฐะฟัััะธััั ะฟะพ ะฐะดัะตัั `http://localhost:6003`

## ๐ฆ ะฃััะฐะฝะพะฒะบะฐ ะพะฑัะฐะฑะพัะบะธ 1C

1. ะกะบะฐัะฐะนัะต ะณะพัะพะฒัั ะพะฑัะฐะฑะพัะบั ะธะท ะฟะฐะฟะบะธ build **[MCP_Toolkit.epf](./build/MCP_Toolkit.epf)**
2. ะัะบัะพะนัะต ะพะฑัะฐะฑะพัะบั ะฒ 1C (ะคะฐะนะป โ ะัะบัััั)
3. ะ ะฝะฐัััะพะนะบะฐั ะพะฑัะฐะฑะพัะบะธ ัะบะฐะถะธัะต:
   - URL ะฟัะพะบัะธ-ัะตัะฒะตัะฐ: `http://localhost:6003`
   - (ะพะฟัะธะพะฝะฐะปัะฝะพ) ID ะบะฐะฝะฐะปะฐ ะดะปั ะธะทะพะปััะธะธ ะบะพะผะฐะฝะด
4. ะะฐะถะผะธัะต ะบะฝะพะฟะบั "ะะพะดะบะปััะธัััั"

## โ๏ธ ะะฐัััะพะนะบะฐ AI-ะฐะณะตะฝัะฐ

### Kiro IDE

ะะพะฑะฐะฒััะต ะฒ ัะฐะนะป `.kiro/settings/mcp.json`:

```json
{
  "mcpServers": {
    "onec-mcp-toolkit-proxy": {
      "url": "http://localhost:6003/mcp",
      "transport": "http",
      "type": "streamable-http",
      "disabled": false,
      "autoApprove": ["execute_query", "get_metadata"]
    }
  }
}
```

### Claude Desktop

ะัะบัะพะนัะต ะบะพะฝัะธะณััะฐัะธะพะฝะฝัะน ัะฐะนะป:
- **Windows**: `%APPDATA%\Claude\claude_desktop_config.json`
- **macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`

ะะพะฑะฐะฒััะต ะบะพะฝัะธะณััะฐัะธั:

```json
{
  "mcpServers": {
    "onec-mcp-toolkit-proxy": {
      "url": "http://localhost:6003/mcp",
      "transport": "http"
    }
  }
}
```

ะะตัะตะทะฐะฟัััะธัะต ะฟัะธะปะพะถะตะฝะธะต.

## ๐๏ธ ะะพัััะฟะฝัะต MCP-ะธะฝััััะผะตะฝัั

| ะะฝััััะผะตะฝั | ะะฟะธัะฐะฝะธะต |
|-----------|----------|
| **execute_query** | ะัะฟะพะปะฝะตะฝะธะต ะทะฐะฟัะพัะพะฒ ะฝะฐ ัะทัะบะต ะทะฐะฟัะพัะพะฒ 1C |
| **execute_code** | ะัะฟะพะปะฝะตะฝะธะต ะฟัะพะธะทะฒะพะปัะฝะพะณะพ ะบะพะดะฐ 1C |
| **get_metadata** | ะะพะปััะตะฝะธะต ะธะฝัะพัะผะฐัะธะธ ะพ ััััะบัััะต ะผะตัะฐะดะฐะฝะฝัั ะฑะฐะทั |
| **get_event_log** | ะะพะปััะตะฝะธะต ะทะฐะฟะธัะตะน ะธะท ะถััะฝะฐะปะฐ ัะตะณะธัััะฐัะธะธ |
| **get_object_by_link** | ะะพะปััะตะฝะธะต ะพะฑัะตะบัะฐ ะฟะพ ะฝะฐะฒะธะณะฐัะธะพะฝะฝะพะน ัััะปะบะต |
| **get_link_of_object** | ะะตะฝะตัะฐัะธั ะฝะฐะฒะธะณะฐัะธะพะฝะฝะพะน ัััะปะบะธ ะฝะฐ ะพะฑัะตะบั |
| **find_references_to_object** | ะะพะธัะบ ะฒัะตั ัััะปะพะบ ะฝะฐ ะพะฑัะตะบั |
| **get_access_rights** | ะะพะปััะตะฝะธะต ะฟัะฐะฒ ะดะพัััะฟะฐ ะบ ะพะฑัะตะบัะฐะผ ะผะตัะฐะดะฐะฝะฝัั |

## ๐ REST API (ะฐะปััะตัะฝะฐัะธะฒะฐ MCP)

ะะปั AI-ะฐะณะตะฝัะพะฒ, ะฝะต ะฟะพะดะดะตัะถะธะฒะฐััะธั ะฟัะพัะพะบะพะป MCP, ะธะปะธ ะฟัะธ ะฟัะตะดะฟะพััะตะฝะธะธ ััะฐะฝะดะฐััะฝัั HTTP-ะทะฐะฟัะพัะพะฒ, ะฟัะพะบัะธ ะฟัะตะดะพััะฐะฒะปัะตั REST API ั ัะพะน ะถะต ััะฝะบัะธะพะฝะฐะปัะฝะพัััั.

**ะะฐะทะพะฒัะน URL:** `http://localhost:6003/api/`

### ะะพัััะฟะฝัะต ัะฝะดะฟะพะธะฝัั

| ะญะฝะดะฟะพะธะฝั | ะะตัะพะด | ะะฟะธัะฐะฝะธะต |
|----------|-------|----------|
| `/api/execute_query` | POST | ะัะฟะพะปะฝะตะฝะธะต ะทะฐะฟัะพัะพะฒ 1C |
| `/api/execute_code` | POST | ะัะฟะพะปะฝะตะฝะธะต ะบะพะดะฐ 1C |
| `/api/get_metadata` | GET/POST | ะะพะปััะตะฝะธะต ะผะตัะฐะดะฐะฝะฝัั |
| `/api/get_event_log` | POST | ะััะฝะฐะป ัะตะณะธัััะฐัะธะธ |
| `/api/get_object_by_link` | POST | ะะพะปััะธัั ะพะฑัะตะบั ะฟะพ ัััะปะบะต |
| `/api/get_link_of_object` | POST | ะะตะฝะตัะฐัะธั ัััะปะบะธ ะฝะฐ ะพะฑัะตะบั |
| `/api/find_references_to_object` | POST | ะะพะธัะบ ัััะปะพะบ ะฝะฐ ะพะฑัะตะบั |
| `/api/get_access_rights` | POST | ะะพะปััะตะฝะธะต ะฟัะฐะฒ ะดะพัััะฟะฐ |

### ะคะพัะผะฐั ะพัะฒะตัะพะฒ

ะัะต ะพัะฒะตัั ัะปะตะดััั ะตะดะธะฝะพะน ััััะบัััะต:

**ะฃัะฟะตั:** `{"success": true, "data": <ัะตะทัะปััะฐั>}`  
**ะัะธะฑะบะฐ:** `{"success": false, "error": "ะะฟะธัะฐะฝะธะต ะพัะธะฑะบะธ"}`

ะะพะดัะพะฑะฝัะต ะฟัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั REST API ะดะพัััะฟะฝั ะฒ ะฟะพะปะฝะพะน ะดะพะบัะผะตะฝัะฐัะธะธ.

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- ะะฟะฐัะฝัะต ะพะฟะตัะฐัะธะธ ะฑะปะพะบะธัััััั ะฝะฐัััะฐะธะฒะฐะตะผัะผ ัะตัะฝัะผ ัะฟะธัะบะพะผ
- ะัะฟะพะปัะทัะนัะต `ALLOW_DANGEROUS_WITH_APPROVAL=true` ะดะปั ัะตะถะธะผะฐ ะฟะพะดัะฒะตัะถะดะตะฝะธั
- ะะตะบะพะผะตะฝะดัะตััั ะฝะฐัััะพะธัั `autoApprove` ัะพะปัะบะพ ะดะปั ะฑะตะทะพะฟะฐัะฝัั ะธะฝััััะผะตะฝัะพะฒ

## ๐ ะะทะพะปััะธั ะบะฐะฝะฐะปะพะฒ

ะัะธ ะฟะพะดะบะปััะตะฝะธะธ ะฝะตัะบะพะปัะบะธั ะบะปะธะตะฝัะพะฒ 1C ะบ ะพะดะฝะพะผั ะฟัะพะบัะธ-ัะตัะฒะตัั ะผะพะถะฝะพ ะธะทะพะปะธัะพะฒะฐัั ะฟะพัะพะบะธ ะบะพะผะฐะฝะด ั ะฟะพะผะพััั ID ะบะฐะฝะฐะปะพะฒ.

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต ั MCP

```json
{
  "mcpServers": {
    "onec-dev": {
      "url": "http://localhost:6003/mcp?channel=dev-environment",
      "transport": "http",
      "type": "streamable-http"
    },
    "onec-prod": {
      "url": "http://localhost:6003/mcp?channel=prod-environment",
      "transport": "http",
      "type": "streamable-http"
    }
  }
}
```

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต ั REST API

ะัะต REST-ัะฝะดะฟะพะธะฝัั ะฟะพะดะดะตัะถะธะฒะฐัั ะธะทะพะปััะธั ะบะฐะฝะฐะปะพะฒ ัะตัะตะท ะฟะฐัะฐะผะตัั ะทะฐะฟัะพัะฐ `?channel=<id>`:

```bash
# ะะฐะฝะฐะป ะดะปั ัะฐะทัะฐะฑะพัะบะธ
curl -X POST "http://localhost:6003/api/execute_query?channel=dev-environment" \
  -H "Content-Type: application/json" \
  -d '{"query": "ะะซะะะะขะฌ 1"}'

# ะะฐะฝะฐะป ะดะปั ะฟัะพะดะฐะบัะตะฝะฐ
curl -X POST "http://localhost:6003/api/execute_query?channel=prod-environment" \
  -H "Content-Type: application/json" \
  -d '{"query": "ะะซะะะะขะฌ 1"}'
```

**ะะฐะถะฝะพ:** ะฃะบะฐะถะธัะต ัะพั ะถะต ID ะบะฐะฝะฐะปะฐ ะฒ ะฝะฐัััะพะนะบะฐั ะพะฑัะฐะฑะพัะบะธ 1C ะดะปั ัะพะพัะฒะตัััะฒัััะตะณะพ ะพะบััะถะตะฝะธั.

## ๐ Skills ะดะปั AI-ะฐะณะตะฝัะพะฒ

ะัะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธะธ **REST API** ัะตะบะพะผะตะฝะดัะตััั ะธัะฟะพะปัะทะพะฒะฐัั ะณะพัะพะฒัะต skills, ะบะพัะพััะต ัะพะดะตัะถะฐั ะดะตัะฐะปัะฝัะต ะธะฝััััะบัะธะธ ะฟะพ ัะฐะฑะพัะต ั 1C MCP Toolkit.

### ะะพัััะฟะฝัะต skills

๐ **ะะฐะฟะบะฐ:** `skills/`

| Skill | ะะฟะธัะฐะฝะธะต | ะะตะบะพะผะตะฝะดัะตััั ะดะปั |
|-------|----------|-------------------|
| **calling-1c-rest-api-via-curl** | ะะพะปะฝะพะต ััะบะพะฒะพะดััะฒะพ ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั REST API ัะตัะตะท curl: ะฒัะต ัะฝะดะฟะพะธะฝัั, ัะพัะผะฐัั ะทะฐะฟัะพัะพะฒ/ะพัะฒะตัะพะฒ, ะฟัะธะผะตัั workflow, ะพะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ | REST API ะบะปะธะตะฝัั, ะฐะฒัะพะผะฐัะธะทะฐัะธั, ัะบัะธะฟัั |
| **composing-1c-queries** | ะัะฐะฒะธะปะฐ ัะพััะฐะฒะปะตะฝะธั ะบะพััะตะบัะฝัั ะทะฐะฟัะพัะพะฒ ะฝะฐ ัะทัะบะต ะทะฐะฟัะพัะพะฒ 1C: ัะธะฝัะฐะบัะธั, ะพะฟัะธะผะธะทะฐัะธั, ะฒะธัััะฐะปัะฝัะต ัะฐะฑะปะธัั, ะฒัะตะผะตะฝะฝัะต ัะฐะฑะปะธัั, JOIN'ั | ะะฐะฑะพัะฐ ั ะดะฐะฝะฝัะผะธ 1C ัะตัะตะท execute_query |

### ะะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั

Skills ัะพะดะตัะถะฐั ะฟะพะดัะพะฑะฝัะต ะธะฝััััะบัะธะธ ะธ reference-ะดะพะบัะผะตะฝัะฐัะธั ะดะปั AI-ะฐะณะตะฝัะพะฒ. ะะฐะถะดัะน skill ะฒะบะปััะฐะตั:
- ะะฟะธัะฐะฝะธะต ะฒะพะทะผะพะถะฝะพััะตะน
- ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั
- ะัััะธะต ะฟัะฐะบัะธะบะธ
- ะขะธะฟะธัะฝัะต ะฟะฐััะตัะฝั ัะฐะฑะพัั

ะะปั AI-ะฐะณะตะฝัะพะฒ, ะธัะฟะพะปัะทัััะธั REST API, skill `calling-1c-rest-api-via-curl` ัะฒะปัะตััั ะพัะฝะพะฒะฝัะผ ััะบะพะฒะพะดััะฒะพะผ ะธ ัะพะดะตัะถะธั ะฒัะต ะฝะตะพะฑัะพะดะธะผัะต ะดะตัะฐะปะธ ะดะปั ัััะตะบัะธะฒะฝะพะน ัะฐะฑะพัั ั API.

## ๐ ะะพะบัะผะตะฝัะฐัะธั

ะะพะดัะพะฑะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั ะดะพัััะฟะฝะฐ ะฒ **[README_FULL](./README_FULL.md)** 


